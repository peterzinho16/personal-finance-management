package com.bindord.financemanagement;

import org.apache.commons.text.StringEscapeUtils;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

public class HTMLTextExtractor {
  public static String extractTextJsoup(String html) {
    // Using Jsoup - Most recommended approach

    Document doc = Jsoup.parse(html);
    return doc.text(); // Equivalent to textContent, removes all HTML tags
  }

  public static String extractTextRegex(String html) {
    // Using regex - Simple but not recommended for complex HTML
    return html.replaceAll("<[^>]*>", "")
        .replaceAll("\\s+", " ")
        .trim();
  }

  public static String extractTextApacheCommons(String html) {
    // Using Apache Commons Text
    String unescaped = StringEscapeUtils.unescapeHtml4(html);
    return unescaped.replaceAll("<[^>]*>", "")
        .replaceAll("\\s+", " ")
        .trim();
  }

  public static void main(String[] args) {
    //String htmlExample = "<div>Hello <b>World</b>! <p>This is a <i>test</i>.</p></div>";
    String htmlExample = "<html><head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"><style>\r\n<!--\r\n@media(min-width:768px) {\r\n.md_px-4\r\n\t{padding-left:1rem!important;\r\n\tpadding-right:1rem!important}\r\n\r\n\t}\r\n-->\r\n</style></head><body class=\"md:pd-4\" style=\"font-family:Arial,sans-serif\"><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background-color:rgb(94,24,108)\"><tbody><tr><td><table align=\"center\" width=\"100%\" class=\"md_px-4\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"max-width:37.5em; background-color:rgb(255,255,255); margin-top:2rem; border-radius:16px 16px 0 0; text-align:center; padding-top:2rem; padding-bottom:0px\"><tbody><tr style=\"width:100%\"><td><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"><tbody style=\"width:100%\"><tr style=\"width:100%\"><td align=\"center\" data-id=\"__react-email-column\"><img alt=\"Logo Yape\" height=\"72\" src=\"https://staceu2yapefrntd10.blob.core.windows.net/$web/lending/logo_yape.png\" width=\"56\" style=\"display:block; outline:none; border:none; text-decoration:none\"> <p style=\"font-size:1.125rem; line-height:1.75rem; margin:16px 0; color:rgb(116,35,132); margin-top:1.5rem; margin-bottom:0px\"><strong>¡Hola, Petter P. Carranza C.!</strong></p><p style=\"font-size:1.5rem; line-height:2rem; margin:16px 0; color:rgb(116,35,132); margin-top:0.5rem; margin-bottom:2rem\"><strong>¡Acabas de yapear exitosamente!</strong></p></td></tr></tbody></table><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"padding-left:2rem; padding-right:2rem\"><tbody style=\"width:100%\"><tr style=\"width:100%\"><td data-id=\"__react-email-column\" style=\"width:100%; height:2px; background-color:#6868711A\"></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background-color:rgb(246,244,251)\"><tbody><tr><td><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"max-width:37.5em; background-color:rgb(255,255,255); padding-left:1rem; padding-right:1rem; padding-bottom:1rem; border-radius:0 0 16px 16px\"><tbody><tr style=\"width:100%\"><td><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"><tbody style=\"width:100%\"><tr style=\"width:100%\"><td align=\"center\" data-id=\"__react-email-column\"><p style=\"font-size:15px; line-height:24px; margin:16px 0; color:#686871B2; margin-top:1.5rem; margin-bottom:0px\"><strong>Monto de yapeo*</strong></p><table align=\"center\" style=\"width:100%\"><tbody><tr><td align=\"center\"><table style=\"padding-right:1rem\"><tbody><tr><td style=\"color:rgb(205,185,234); font-size:1.25rem; line-height:1.75rem; padding-right:5px\">S/</td><td style=\"color:rgb(96,3,145); font-size:50px; line-height:68px\">13.60</td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"><tbody style=\"width:100%\"><tr style=\"width:100%\"><td data-id=\"__react-email-column\"><table align=\"center\" cellspacing=\"16px\" style=\"width:100%; padding-right:1rem\"><tbody><tr><td width=\"50%\" style=\"text-align:right; color:rgb(104,104,113); font-weight:700; font-size:0.875rem; line-height:1.25rem\">Yapero</td><td style=\"color:rgb(104,104,113); font-size:0.875rem; line-height:1.25rem\">Petter P. Carranza C.</td></tr><tr><td width=\"50%\" style=\"text-align:right; color:rgb(104,104,113); font-weight:700; font-size:0.875rem; line-height:1.25rem\">Tu número de celular</td><td style=\"color:rgb(104,104,113); font-size:0.875rem; line-height:1.25rem\">XXXXXXXXX218</td></tr><tr><td width=\"50%\" style=\"text-align:right; color:rgb(104,104,113); font-weight:700; font-size:0.875rem; line-height:1.25rem\">Fecha y Hora de la operación</td><td style=\"color:rgb(104,104,113); font-size:0.875rem; line-height:1.25rem\">26 diciembre 2024 - 07:27 p. m.</td></tr><tr><td width=\"50%\" style=\"text-align:right; color:rgb(104,104,113); font-weight:700; font-size:0.875rem; line-height:1.25rem\">Celular del Beneficiario</td><td style=\"color:rgb(104,104,113); font-size:0.875rem; line-height:1.25rem\">XXXXXXXXX115</td></tr><tr><td width=\"50%\" style=\"text-align:right; color:rgb(104,104,113); font-weight:700; font-size:0.875rem; line-height:1.25rem\">Nombre del Beneficiario</td><td style=\"color:rgb(104,104,113); font-size:0.875rem; line-height:1.25rem\">Wilson Carranza B.</td></tr><tr><td width=\"50%\" style=\"text-align:right; color:rgb(104,104,113); font-weight:700; font-size:0.875rem; line-height:1.25rem\">Nº de operación</td><td style=\"color:rgb(104,104,113); font-size:0.875rem; line-height:1.25rem\">13443240</td></tr></tbody></table></td></tr></tbody></table><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"><tbody style=\"width:100%\"><tr style=\"width:100%\"><td align=\"center\" data-id=\"__react-email-column\"><p style=\"font-size:15px; line-height:24px; margin:16px 0; text-align:center; color:#686871B2\">*Por tu seguridad, te notificaremos por cada <br>yapeo que realices.</p></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background-color:rgb(246,244,251); padding-top:2rem\"><tbody><tr><td><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"max-width:37.5em\"><tbody><tr style=\"width:100%\"><td><table align=\"center\" width=\"100%\" class=\"banner-promotional-container\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"><tbody style=\"width:100%\"><tr style=\"width:100%\"><td data-id=\"__react-email-column\" style=\"border-radius:16px 16px 0 0\"><img class=\"custom-image\" alt=\"Banner promocional\" src=\"https://staceu2yapefrntd10.blob.core.windows.net/$web/pagos/yapeo/Banner_600_105_Mail_transaccional_TC.png\" width=\"100%\" style=\"display:block; outline:none; border:none; text-decoration:none; border-radius:16px 16px 0 0; max-width:600px; max-height:105px\"></td></tr></tbody></table><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"><tbody style=\"width:100%\"><tr style=\"width:100%\"><td data-id=\"__react-email-column\"><img alt=\"Yape contáctanos\" src=\"https://staceu2yapefrntd10.blob.core.windows.net/$web/pagos/yapeo/Footer.png\" width=\"100%\" style=\"display:block; outline:none; border:none; text-decoration:none\"></td></tr></tbody></table><table align=\"center\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"><tbody style=\"width:100%\"><tr style=\"width:100%\"><td data-id=\"__react-email-column\" style=\"padding-top:1.5rem; padding-bottom:1.5rem; padding-left:1.25rem; padding-right:1.25rem\"><p style=\"font-size:10px; line-height:11px; margin:16px 0; color:rgb(255,79,0); font-family:Helvetica\"><strong>Juntos somos más seguros</strong> <br>En nuestras comunicaciones nunca incluiremos links a otras páginas, archivos adjuntos, ni solicitaremos tus datos personales o información de tus cuentas. El banco, bajo ningún motivo, brinda señales wifi con la siglas del BCP. Cualquier correo que llegue con nuestro nombre y presente alguna de las características mencionadas, debe ser eliminado inmediatamente. Recuerda, nuestros correos serán personalizados y siempre estarán dirigidos a tu nombre.</p><p style=\"font-size:10px; line-height:11px; margin:16px 0; color:rgb(87,89,91); font-family:Helvetica\"><strong>Si no deseas recibir la confirmación de tus yapeos por correo, puedes desactivarlas ingresando a la aplicación de Yape. Solo dirígete a &quot;Ajustes&quot;, ingresa a la sección de “Notificaciones por yapeo” y desactiva la opción &quot;Recibir aviso por correo&quot;. Para cualquier consulta, no respondas a este correo. En su lugar, comunícate con nuestro canal oficial de WhatsApp al 939 339 299.</strong><br>Si este correo omite vocales, tildes, letras ñ o éstas son cambiadas por otros caracteres, no se debe a errores ortográficos del Banco de Crédito BCP. Esto puede originarse por la configuración del servidor de tu correo o la versión de tu navegador. El sistema de correo electrónico del BCP está destinado únicamente para fines de negocio, cualquier otro uso contraviene las políticas del Banco. Toda la información del negocio contenida en este mensaje es confidencial y de uso exclusivo del BCP. Su divulgación, copia y/o adulteración están prohibidas y solo debe ser conocida por la persona a quien se dirige este mensaje. Esta información se envía de acuerdo a la legislación correo electrónico comercial no solicitado - SPAM según Leyes 28493 y 29426.</p></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><img src=\"http://url8534.yape.pe/wf/open?upn=u001.iS6nJPx7zptRuCSCEwB7Rc0ctUBrgWutyNbF58EHL19eQ-2BzGgMuPbWehTequpFNNb73I9F0URug33xB62zGJAs2DQMvXX0-2Be3L-2B0ExW0-2BtX3jF-2BstEwoCeU5CuJ53HYTFdxusear8AJqYbe7oeDfXQTA1rMCkpZwpnk3-2FqocNxgYYD5pCHlDYoA2re6Fv81wOHK-2Fw6FzTmK-2F1ZptXs68C9MZ5CZjLWoiqJvhR23y2F4eUPQjUHF9X1XLujdG18EFGzrJzUCaBZAs38UXU8ifteh9SgeaM2LaKO4pCRBxmqWxKd-2BFC4TRNLbjkepFDeDhjA4tQzojRtOPEhPXaofDB8RYKm74syU47CguScxRQDUPSDIFaxzhU39Kxx2v-2FW-2Bx\" alt=\"\" width=\"1\" height=\"1\" border=\"0\" style=\"height:1px!important; width:1px!important; border-width:0!important; margin-top:0!important; margin-bottom:0!important; margin-right:0!important; margin-left:0!important; padding-top:0!important; padding-bottom:0!important; padding-right:0!important; padding-left:0!important\"> </body></html>";
    // Using Jsoup
    System.out.println("Jsoup result: " + extractTextJsoup(htmlExample));

    // Using regex
    System.out.println("Regex result: " + extractTextRegex(htmlExample));

    // Using Apache Commons
    System.out.println("Apache Commons result: " + extractTextApacheCommons(htmlExample));
  }
}